/*!
 * fullpage.js Parallax Effect Extension 0.0.3
 * https://github.com/alvarotrigo/fullPage.js
 *
 * This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distrubute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(n){window.fp_parallaxExtension=function(){function e(n){return{cover:{offsetNormal:n?0:T},reveal:{offsetNormal:n?-T:0}}}function t(n){return{cover:{offsetNormal:n?0:N},reveal:{offsetNormal:n?-N:0}}}function o(n){return n*R/100}function i(n){return n*z/100}function a(){if(B){var e=n(U).length?n(U):n(Q).first();b(e,0)}}function l(){var t=n(U).length?n(U):n(Q).first(),o=C===Z,i=o?t.nextAll():t.prevAll(),a=o?t.prevAll():t.nextAll();i.each(function(){b(n(this),e(o)[C].offsetNormal,"silent")}),a.each(function(){b(n(this),0,"silent")}),n(Q).each(function(){var e=n(this).find(K);if(e.length){var t=n(this).find(P).length?n(this).find(P):n(this).find(K).first();r(t)}})}function r(e){var o=C===Z,i=o?e.nextAll():e.prevAll(),a=o?e.prevAll():e.nextAll();i.each(function(){M(n(this),t(o)[C].offsetNormal,"silent")}),a.each(function(){M(n(this),0,"silent")})}function f(n,e){z=mn.width(),e&&!H.scrollBar?(m(),x()):h()}function s(n){V.destroy(),pn=!1}function c(){n(G).on("setAutoScrolling",f).on("destroy",s).on("onScroll",v).on("afterResponsive",p).on("onGrab",d).on("onContinuosHorizontal",u).on("onContinuousVertical",g).on("onResize",y)}function d(n,e){e?h():vn=!0}function p(e,t){n(Y).data("final-x",0),n(Y).data("final-y",0),O=document.querySelectorAll(Q),l()}function u(e,t){un=!0;var o="left"===t.xMovement?n(U).find(K).first():n(U).find(K).last();r(o),setTimeout(function(){V.applyHorizontal(t)})}function g(n,e){gn=!0,l(),setTimeout(function(){V.apply(e)})}function v(){!ln&&pn&&(H.scrollBar||!H.autoScrolling||E.usingExtension("dragAndMove"))&&(requestAnimationFrame(w),ln=!0)}function m(){var n=".fp-bg{transition: all "+H.scrollingSpeed+"ms "+H.easingcss3+"}.fp-slide, .fp-section{will-change: transform;transition: background-position "+H.scrollingSpeed+"ms "+H.easingcss3+";}";H.autoScrolling&&!H.scrollBar&&I(en,n)}function x(){var n=".fp-bg-animate{ transition: all "+H.scrollingSpeed+"ms "+H.easingcss3+"}";I(on,n)}function h(){n(tn).remove()}function y(){clearTimeout(xn),xn=setTimeout(A,350)}function A(){R=mn.height(),z=mn.width(),T=o(H.parallaxOptions.percentage),N=i(H.parallaxOptions.percentage),a(),l(),!H.autoScrolling||H.scrollBar}function w(){var t=E.usingExtension("dragAndMove")?Math.abs(n.fn.fullpage.dragAndMove.getCurrentScroll()):n(window).scrollTop(),o=rn>t,i=n(U).index(Q),a=R+t;rn=t;for(var l=0;l<O.length;++l){var r=O[l],f=R+r.offsetTop;!o&&r.offsetTop<=a?i=l:o&&f>=t&&r.offsetTop<t&&O.length>l+1&&(i=l+1)}var s=R-(O[i].offsetTop-t),c=s*T/R;C!==Z&&(i-=1);var d=C!==Z?c:-T+c;b(n(Q).eq(i),d),i-1>=0&&b(n(O[i-1]),e(!1)[C].offsetNormal),"undefined"!=typeof O[i+1]&&b(n(O[i+1]),e(!0)[C].offsetNormal),ln=!1}function S(n){return Math.round(2*n)/2}function b(n,e,t){var o=S(e,1),i=n.find(K);if(i.length){var a=(n.index(Q),i.filter(j));n=a.length?a:i.first()}if(B)n.css({"background-position-y":o+"px"});else if(!n.hasClass(J)||n.hasClass(L)||"undefined"!=typeof t){var l=n.find(Y),r="undefined"!=typeof l.data("final-x")?l.data("final-x"):0;l.toggleClass(W,"undefined"!=typeof t).css({transform:"translate3d("+r+"px, "+o+"px, 0)"}).data("final-x",r).data("final-y",o)}}function M(n,e,t){var o=S(e,1),i=B?n:n.find(Y);if(!H.scrollBar&&H.autoScrolling||i.addClass("fp-bg-animate"),B)i.toggleClass(W,"undefined"!=typeof t).css("background-position-x",o+"px");else{var a=0,l=i.data("final-y");"none"!==l&&"undefined"!=typeof l&&(a=l),i.toggleClass(W,"undefined"!=typeof t).css({transform:"translate3d("+o+"px, "+a+"px, 0)"}).data("final-x",o).data("final-y",a)}}function q(n){return n.find(K).length?n.find(K).length>1?n.find(K):[n.find(K)]:[n]}function I(e,t){n("#"+e).length||n('<style id="'+e+'">'+t+"</style>").appendTo("head")}var C,T,N,R,z,O,B,F,V=this,k=n.fn.fullpage.getFullpageData(),H=k.options,E=k.internals,_="fullpage-wrapper",G="."+_,L="active",j="."+L,D="fp-section",Q="."+D,U=Q+j,J="fp-slide",K="."+J,P=K+j,W="fp-notransition",X="fp-bg",Y="."+X,Z="reveal",$="cover",nn="fp-parallax-stylesheet",en="fp-parallax-transitions",tn="#"+en,on="fp-parallax-transition-class",an="#"+on,ln=!1,rn=0,fn=!1,sn=!1,cn=!0,dn=!0,pn=!1,un=!1,gn=!1,vn=!1,mn=n(window);!function(){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=n}(),V.apply=function(t){if(vn&&m(),!t.localIsResizing&&!H.scrollBar&&H.autoScrolling){if(g_isAboutToRewindVertical="up"!==t.yMovement&&!t.sectionIndex||t.isMovementUp&&!(t.leavingSection-1),g_isAboutToRewindVertical&&H.continuousVertical&&!gn)return void(g_isAboutToRewindVertical=!1);fn="up"===t.yMovement;var o=e(fn),i=o[C].offsetNormal;b(n(Q).eq(t.sectionIndex),0),b(n(Q).eq(t.leavingSection-1),i),cn=1===Math.abs(t.leavingSection-1-t.sectionIndex);for(var a=Math.min(t.leavingSection-1,t.sectionIndex)+1;a<Math.max(t.leavingSection-1,t.sectionIndex);a++)b(n(Q).eq(a),0,"silent")}},V.applyHorizontal=function(e){if(!e.localIsResizing&&"none"!=e.xMovement){if(F="undefined"!=typeof e.direction&&e.direction!==e.xMovement,F&&H.continuousHorizontal&&!un)return void(F=!1);sn=F?"left"===e.direction:"left"===e.xMovement;var o=t(sn),i=o[C].offsetNormal;M(n(U).find(K).eq(e.slideIndex),0),M(n(U).find(K).eq(e.prevSlideIndex),i),dn=1===Math.abs(e.slideIndex-e.prevSlideIndex);for(var a=Math.min(e.slideIndex,e.prevSlideIndex)+1;a<Math.max(e.slideIndex,e.prevSlideIndex);a++)M(n(U).find(K).eq(a),0,"silent")}},V.init=function(){if(R=mn.height(),z=mn.width(),C=H.parallaxOptions.type,T=o(H.parallaxOptions.percentage),N=i(H.parallaxOptions.percentage),O=document.querySelectorAll(H.sectionSelector),B="background"===H.parallaxOptions.property,c(),!B){var n=".fp-bg{top:0;bottom:0;width: 100%;position:absolute;z-index: -1;}.fp-section, .fp-slide, .fp-section.fp-table, .fp-slide.fp-table, .fp-section .fp-tableCell, .fp-slide .fp-tableCell {position:relative;overflow: hidden;}";I(nn,n),m()}x(),a(),l(),pn=!0},V.destroy=function(){h(),n(an).remove(),T=o(0),N=i(0),l(),n(G).off("setAutoScrolling").off("destroy").off("onScroll").off("afterResponsive").off("onGrab").off("onContinuosHorizontal").off("onContinuousVertical").off("onResize")},V.setOption=function(n,e){"offset"===n?(H.parallaxOptions.percentage=e,T=o(e),N=i(e)):"type"===n&&(H.parallaxOptions.type=e,C=e),l()};var xn;V.afterSlideLoads=function(){var e=B?q(n(U)):n(U).find(Y);if(e.removeClass("fp-bg-animate"),(un||F)&&(r(n(U).find(P)),un=!1),!dn){var o=t(sn),i=o[C].offsetNormal,a=n(U).find(P),l=sn?a.nextAll():a.prevAll();(C===Z&&sn||C===$&&!sn)&&l.each(function(){M(n(this),i,"silent")})}},V.afterLoad=function(){if((!H.scrollBar||!H.autoScrolling||E.usingExtension("dragAndMove"))&&((gn||F)&&(l(),gn=!1),!cn)){var t=e(fn),o=t[C].offsetNormal,i=fn?n(U).nextAll():n(U).prevAll();(C===Z&&fn||C===$&&!fn)&&i.each(function(){b(n(this),o,"silent")})}},V.c=E.c;var hn=V["common".charAt(0)];return"complete"===document.readyState&&hn("parallax"),n(window).on("load",function(){hn("parallax")}),V}}(jQuery);